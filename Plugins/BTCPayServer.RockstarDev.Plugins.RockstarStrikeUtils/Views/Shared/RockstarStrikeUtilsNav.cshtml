@using BTCPayServer.Abstractions.Contracts
@using BTCPayServer.Abstractions.Extensions
@using BTCPayServer.Client
@using BTCPayServer.RockstarDev.Plugins.RockstarStrikeUtils
@using Microsoft.AspNetCore.Mvc.TagHelpers
@inject IScopeProvider ScopeProvider
@{
    var storeId = ScopeProvider.GetCurrentStoreId();
    var activeClass = @ViewData.ActivePageClass(RockstarStrikeUtilsPlugin.PluginStrikeNavKey);
    var isActive = !string.IsNullOrWhiteSpace(activeClass);
}
@if (!string.IsNullOrEmpty(storeId))
{
    <li class="nav-item">
        <a permission="@Policies.CanModifyServerSettings"
           asp-controller="RockstarStrikeUtils" asp-action="Index" asp-route-storeId="@storeId"
           class="nav-link @ViewData.ActivePageClass(RockstarStrikeUtilsPlugin.PluginStrikeNavKey, null, "Index")">

            <svg xmlns="http://www.w3.org/2000/svg" style="width: 20px; margin-right: 6px;" viewBox="0 0 1024 1024" fill="currentColor">
                <path d="M512 0c-282.77 0-512 229.23-512 512s229.23 512 512 512 512-229.23 512-512S794.77 0 512 0zm0 944C287.39 944 80 736.61 80 512S287.39 80 512 80s432 207.39 432 432-207.39 432-432 432zm0-336c-53.02 0-96-42.98-96-96s42.98-96 96-96 96 42.98 96 96-42.98 96-96 96zm96-336H416V208c0-48.6 39.4-88 88-88h96c48.6 0 88 39.4 88 88v64zm-64 0V208c0-13.26-10.74-24-24-24h-96c-13.26 0-24 10.74-24 24v64h144z"/>
            </svg>

            <span>Strike Utils</span>
        </a>
    </li>

    @if (isActive)
    {
        <li class="nav-item nav-item-sub">
            <a permission="@Policies.CanModifyServerSettings" 
               asp-controller="RockstarStrikeUtils" asp-action="ReceiveRequests" asp-route-storeId="@storeId" 
               class="nav-link @ViewData.ActivePageClass(RockstarStrikeUtilsPlugin.PluginStrikeNavKey, null, "ReceiveRequests")">Receive Requests</a>
        </li>
        <li class="nav-item nav-item-sub">
            <a permission="@Policies.CanModifyServerSettings" 
               asp-controller="RockstarStrikeUtils" asp-action="CurrencyExchanges" asp-route-storeId="@storeId" 
               class="nav-link @ViewData.ActivePageClass(RockstarStrikeUtilsPlugin.PluginStrikeNavKey, null, "CurrencyExchanges")">Currency Exchanges</a>
        </li>
        <li class="nav-item nav-item-sub">
            <a permission="@Policies.CanModifyServerSettings" 
               asp-controller="RockstarStrikeUtils" asp-action="PaymentMethods" asp-route-storeId="@storeId" 
               class="nav-link @ViewData.ActivePageClass(RockstarStrikeUtilsPlugin.PluginStrikeNavKey, null, "PaymentMethods")">Payment Methods</a>
        </li>
        <li class="nav-item nav-item-sub">
            <a permission="@Policies.CanModifyServerSettings" 
               asp-controller="RockstarStrikeUtils" asp-action="Deposits" asp-route-storeId="@storeId" 
               class="nav-link @ViewData.ActivePageClass(RockstarStrikeUtilsPlugin.PluginStrikeNavKey, null, "Deposits")">Deposits</a>
        </li>
        <li class="nav-item nav-item-sub">
            <a permission="@Policies.CanModifyServerSettings" 
               asp-controller="RockstarStrikeUtils" asp-action="Configuration" asp-route-storeId="@storeId" 
               class="nav-link @ViewData.ActivePageClass(RockstarStrikeUtilsPlugin.PluginStrikeNavKey, null, "Configuration")">Configuration</a>
        </li>
    }
}
